{"version":3,"sources":["../src/tool.js"],"names":[],"mappings":"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","file":"tool.js","sourcesContent":["\nexport default function makeTool(xmlParser, Document, Node, NodeList, scopable){\n\tvar $={\n\t\tparseXML: xmlParser,\n\t\textend: Object.assign,\n\t\tisFunction: function(a){\n\t\t\treturn typeof a ==='function'\n\t\t},\n\t\tisArray: function(a){\n\t\t\treturn Array.isArray(a)\n\t\t},\n\t\teach: function(a,f,ctx){\n\t\t\tif(Array.isArray(a)){\n\t\t\t\ta.forEach(f,ctx)\n\t\t\t}else if(typeof a ==='object'){\n\t\t\t\tObject.keys(a).forEach(function(k){\n\t\t\t\t\tf.call(ctx,k,a[k])\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tmap: function(a,f,ctx){\n\t\t\treturn a.map(f,ctx)\n\t\t}\n\t};\n\n\t$.extend($,{\n\t\ttoArray: function(args){\n\t\t\tvar a=[];\n\t\t\tfor(var i=0,len=args.length;i<len;i++)\n\t\t\t\ta.push(args[i])\n\t\t\treturn a\n\t\t}\n\t})\n\n\tvar directChildSelector=/((^|,)\\s*>)/, id=\"sxxx\"\n\t$.extend(Node.prototype,{\n\t\t$: function(selector){\n\t\t\tif(!directChildSelector.test(selector))\n\t\t\t\treturn this.querySelectorAll(selector)\n\t\t\telse if(scopable)\n\t\t\t\treturn this.querySelectorAll(selector.split(',').map(function(a){\n\t\t\t\t\t\treturn a.trim().charAt(0)=='>' ? ':scope'+a : a\n\t\t\t\t\t}).join(','))\n\t\t\telse if(this.id){\n\t\t\t\treturn this.querySelectorAll(selector.split(',').map(function(a){\n\t\t\t\t\t\t//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a\n\t\t\t\t\t\treturn (a=a.trim()).charAt(0)=='>' ? a.substring(1) : a\n\t\t\t\t\t},this).join(','))\n\t\t\t}else{\n\t\t\t\tthis.id=id\n\t\t\t\tvar nodes=this.querySelectorAll(selector.split(',').map(function(a){\n\t\t\t\t\t\t//IE can't find '#xx', @todo: fix it later\n\t\t\t\t\t\t//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a\n\t\t\t\t\t\treturn (a=a.trim()).charAt(0)=='>' ? a.substring(1) : a\n\t\t\t\t\t},this).join(','))\n\t\t\t\tdelete this.id\n\t\t\t\treturn nodes\n\t\t\t}\n\t\t},\n\t\t$1:function(selector){\n\t\t\tif(!directChildSelector.test(selector))\n\t\t\t\treturn this.querySelector(selector)\n\t\t\telse if(scopable)\n\t\t\t\treturn this.querySelector(selector.split(',').map(function(a){\n\t\t\t\t\t\treturn (a=a.trim()).charAt(0)=='>' ? ':scope'+a : a\n\t\t\t\t\t}).join(','))\n\t\t\telse if(this.id){\n\t\t\t\treturn this.querySelector(selector.split(',').map(function(a){\n\t\t\t\t\t\t//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a\n\t\t\t\t\t\treturn (a=a.trim()).charAt(0)=='>' ? a.substring(1) : a\n\t\t\t\t\t},this).join(','))\n\t\t\t}else{\n\t\t\t\tthis.id=id\n\t\t\t\tvar nodes=this.querySelector(selector.split(',').map(function(a){\n\t\t\t\t\t\t//return  '#'+this.id+((a=a.trim()).charAt(0)=='>' ? '' : ' ')+a\n\t\t\t\t\t\treturn (a=a.trim()).charAt(0)=='>' ? a.substring(1) : a\n\t\t\t\t\t},this).join(','))\n\t\t\t\tdelete this.id\n\t\t\t\treturn nodes\n\t\t\t}\n\t\t},\n\t\tattr: function(name, value){\n\t\t\tif(arguments.length==1){\n\t\t\t\tvar attr=this.attributes.getNamedItem(name)\n\t\t\t\treturn attr ? attr.value : undefined\n\t\t\t}else if(value==null)\n\t\t\t\tthis.removeAttribute(name)\n\t\t\telse\n\t\t\t\tthis.setAttribute(name,value)\n\t\t},\n\t\tremove: Node.prototype.remove || function(){\n\t\t\tthis.parentNode.removeChild(this)\n\t\t},\n\t\tuptrim: function(){\n\t\t\tvar parent=this.parentNode\n\t\t\tthis.remove()\n\t\t\tif(parent.childNodes.length==0)\n\t\t\t\tparent.uptrim()\n\t\t}\n\t})\n\n\t$.extend(NodeList.prototype,{\n\t\tasArray: function(o){\n\t\t\to=o||[]\n\t\t\tfor(var i=0,len=this.length;i<len;i++)\n\t\t\t\to.push(this[i])\n\t\t\treturn o\n\t\t},\n\t\tforEach: Array.prototype.forEach,\n\t\tmap: Array.prototype.map\n\t})\n\n\treturn $\n}\n"]}