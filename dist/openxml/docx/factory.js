'use strict';

Object.defineProperty(exports, "__esModule", {
	value: true
});
exports.default = factory;

var _model = require('./model');

var _model2 = _interopRequireDefault(_model);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function attr(node, name) {
	return node ? node.attr(name) : undefined;
}

function factory(wXml, doc, parent, more) {
	var tag = wXml.localName,
	    swap;

	if ('document' == tag) return new (require('./model/document'))(wXml, doc, parent);else if ('styles' == tag) return new (require('./model/documentStyles'))(wXml, doc);else if ('abstractNum' == tag) return new (require('./model/style/numberingDefinition'))(wXml, doc);else if ('num' == tag) return new (require('./model/style/list'))(wXml, doc);else if ('style' == tag) {
		switch (wXml.attr('w:type')) {
			case 'paragraph':
				return new (require('./model/style/paragraph'))(wXml, doc);
			case 'character':
				return new (require('./model/style/inline'))(wXml, doc);
			case 'table':
				return new (require('./model/style/table'))(wXml, doc);
			case 'numbering':
				return new (require('./model/style/numbering'))(wXml, doc);
		}
	} else if ('docDefaults' == tag) return new (require('./model/style/document'))(wXml, doc);else if ('body' == tag) return new (require('./model/body'))(wXml, doc, parent);else if ('p' == tag) {
		var styleId = attr(wXml.$1('>pPr>pStyle'), 'w:val'),
		    style = doc.style.get(styleId);
		if (wXml.$1('>pPr>numPr') || style && style.getNumId() != -1) return new (require('./model/list'))(wXml, doc, parent);

		if (style && style.getOutlineLevel() != -1) return new (require('./model/heading'))(wXml, doc, parent);

		return new (require('./model/paragraph'))(wXml, doc, parent);
	} else if ('r' == tag) {
		var style = doc.style.get(attr(wXml.$1('>rPr>rStyle'), 'w:val'));
		if (style && style.getOutlineLevel() != -1) return new (require('./model/headingInline'))(wXml, doc, parent);else if (wXml.childNodes.length == 1 || wXml.childNodes == 2 && wXml.firstChild.localName == 'rPr') {
			switch (wXml.lastChild.localName) {
				case 'fldChar':
				case 'instrText':
					return factory(wXml.lastChild, doc, parent);
			}
		}

		return new (require('./model/inline'))(wXml, doc, parent);
	} else if ('instrText' == tag) return new (require('./model/fieldInstruct'))(wXml, doc, parent);else if ('t' == tag) return new (require('./model/text'))(wXml, doc, parent);else if ('sym' == tag && wXml.parentNode.localName == 'r') return new (require('./model/symbol'))(wXml, doc, parent);else if ('softHyphen' == tag && wXml.parentNode.localName == 'r') return new (require('./model/softHyphen'))(wXml, doc, parent);else if ('noBreakHyphen' == tag && wXml.parentNode.localName == 'r') return new (require('./model/noBreakHyphen'))(wXml, doc, parent);else if ('tab' == tag && wXml.parentNode.localName == 'r') return new (require('./model/tab'))(wXml, doc, parent);else if ('fldSimple' == tag) return new (require('./model/fieldSimple'))(wXml, doc, parent);else if ('fldChar' == tag) {
		switch (wXml.attr('w:fldCharType')) {
			case 'begin':
				return new (require('./model/fieldBegin'))(wXml, doc, parent);
				break;
			case 'end':
				return new (require('./model/fieldEnd'))(wXml, doc, parent);
				break;
			case 'separate':
				return new (require('./model/fieldSeparate'))(wXml, doc, parent);
				break;
		}
	} else if ('tbl' == tag) return new (require('./model/table'))(wXml, doc, parent);else if ('tr' == tag) return new (require('./model/row'))(wXml, doc, parent);else if ('tc' == tag) return new (require('./model/cell'))(wXml, doc, parent);else if ('br' == tag) return new (require('./model/br'))(wXml, doc, parent);else if ('hyperlink' == tag && 'p' == wXml.parentNode.localName) return new (require('./model/hyperlink'))(wXml, doc, parent);else if ('AlternateContent' == tag) return new (require('./model/drawingAnchor'))(wXml, doc, parent);else if ('wsp' == tag) return new (require('./model/shape'))(wXml, doc, parent);else if ('inline' == tag) {
		var type = wXml.$1('>graphic>graphicData').attr('uri').split('/').pop();
		switch (type) {
			case 'picture':
				return new (require('./model/image'))(wXml, doc, parent);
			case 'diagram':
				return new (require('./model/diagram'))(wXml, doc, parent);
			case 'chart':
				return new (require('./model/chart'))(wXml, doc, parent);
			default:
				console.error('inline ' + type + ' is not suppored yet.');
		}
	} else if ('sdt' == tag) {
		var elBinding = wXml.$1('>sdtPr>dataBinding');
		if (elBinding) {
			//properties
			var path = attr(elBinding, 'w:xpath'),
			    d = path.split(/[\/\:\[]/),
			    name = (d.pop(), d.pop());
			return new (require('./model/documentProperty'))(wXml, doc, parent, name);
		} else {
			//controls
			var elType = wXml.$1('>sdtPr').$1("text, picture, docPartList, comboBox, dropDownList, date, checkbox");
			tag = elType ? elType.localName : null;
			if ('text' == tag) return new (require('./model/control/text'))(wXml, doc, parent);else if ('picture' == tag) return new (require('./model/control/picture'))(wXml, doc, parent);else if ('docPartList' == tag) return new (require('./model/control/gallery'))(wXml, doc, parent);else if ('comboBox' == tag) return new (require('./model/control/combobox'))(wXml, doc, parent);else if ('dropDownList' == tag) return new (require('./model/control/dropdown'))(wXml, doc, parent);else if ('date' == tag) return new (require('./model/control/date'))(wXml, doc, parent);else if ('checkbox' == tag) return new (require('./model/control/checkbox'))(wXml, doc, parent);else return new (require('./model/control/richtext'))(wXml, doc, parent);
		}
	} else if ('bookmarkStart' == tag) return new (require('./model/bookmarkStart'))(wXml, doc, parent);else if ('bookmarkEnd' == tag) return new (require('./model/bookmarkEnd'))(wXml, doc, parent);else if ('oMathPara' == tag) return new (require('./model/equation'))(wXml, doc, parent);else if ('object' == tag) return new (require('./model/OLE'))(wXml, doc, parent);else if ('sectPr' == tag) return new (require('./model/section'))(wXml, doc, parent);

	return new _model2.default(wXml, doc, parent);
}
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9vcGVueG1sL2RvY3gvZmFjdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztrQkFNd0I7O0FBTnhCOzs7Ozs7QUFFQSxTQUFTLElBQVQsQ0FBYyxJQUFkLEVBQW1CLElBQW5CLEVBQXdCO0FBQ3ZCLFFBQU8sT0FBSyxLQUFLLElBQUwsQ0FBVSxJQUFWLENBQUwsR0FBcUIsU0FBckIsQ0FEZ0I7Q0FBeEI7O0FBSWUsU0FBUyxPQUFULENBQWlCLElBQWpCLEVBQXVCLEdBQXZCLEVBQTRCLE1BQTVCLEVBQW9DLElBQXBDLEVBQXlDO0FBQ3ZELEtBQUksTUFBSSxLQUFLLFNBQUw7S0FBZ0IsSUFBeEIsQ0FEdUQ7O0FBR3ZELEtBQUcsY0FBWSxHQUFaLEVBQ0YsT0FBTyxLQUFLLFFBQVEsa0JBQVIsRUFBTCxDQUFrQyxJQUFsQyxFQUF1QyxHQUF2QyxFQUE0QyxNQUE1QyxDQUFQLENBREQsS0FFSyxJQUFHLFlBQVUsR0FBVixFQUNQLE9BQU8sS0FBSyxRQUFRLHdCQUFSLEVBQUwsQ0FBd0MsSUFBeEMsRUFBNkMsR0FBN0MsQ0FBUCxDQURJLEtBRUEsSUFBRyxpQkFBZSxHQUFmLEVBQ1AsT0FBTyxLQUFLLFFBQVEsbUNBQVIsRUFBTCxDQUFtRCxJQUFuRCxFQUF3RCxHQUF4RCxDQUFQLENBREksS0FFQSxJQUFHLFNBQU8sR0FBUCxFQUNQLE9BQU8sS0FBSyxRQUFRLG9CQUFSLEVBQUwsQ0FBb0MsSUFBcEMsRUFBeUMsR0FBekMsQ0FBUCxDQURJLEtBRUEsSUFBRyxXQUFTLEdBQVQsRUFBYTtBQUNwQixVQUFPLEtBQUssSUFBTCxDQUFVLFFBQVYsQ0FBUDtBQUNBLFFBQUssV0FBTDtBQUNDLFdBQU8sS0FBSyxRQUFRLHlCQUFSLEVBQUwsQ0FBeUMsSUFBekMsRUFBOEMsR0FBOUMsQ0FBUCxDQUREO0FBREEsUUFHSyxXQUFMO0FBQ0MsV0FBTyxLQUFLLFFBQVEsc0JBQVIsRUFBTCxDQUFzQyxJQUF0QyxFQUEyQyxHQUEzQyxD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QUNQLE9BQU8sS0FBSyxRQUFRLGFBQVIsRUFBTCxDQUE2QixJQUE3QixFQUFrQyxHQUFsQyxFQUFzQyxNQUF0QyxDQUFQLENBREksS0FFQSxJQUFHLFlBQVUsR0FBVixFQUNQLE9BQU8sS0FBSyxRQUFRLGlCQUFSLEVBQUwsQ0FBaUMsSUFBakMsRUFBc0MsR0FBdEMsRUFBMEMsTUFBMUMsQ0FBUCxDQURJOztBQUdMLFFBQU8sb0JBQVUsSUFBVixFQUFlLEdBQWYsRUFBbUIsTUFBbkIsQ0FBUCxDQTVJdUQ7Q0FBekMiLCJmaWxlIjoiZmFjdG9yeS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNb2RlbCBmcm9tICcuL21vZGVsJ1xuXG5mdW5jdGlvbiBhdHRyKG5vZGUsbmFtZSl7XG5cdHJldHVybiBub2RlP25vZGUuYXR0cihuYW1lKTp1bmRlZmluZWRcbn1cblxuZXhwb3J0IGRlZmF1bHRcdGZ1bmN0aW9uIGZhY3Rvcnkod1htbCwgZG9jLCBwYXJlbnQsIG1vcmUpe1xuXHR2YXIgdGFnPXdYbWwubG9jYWxOYW1lLCBzd2FwO1xuXG5cdGlmKCdkb2N1bWVudCc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2RvY3VtZW50JykpKHdYbWwsZG9jLCBwYXJlbnQpXG5cdGVsc2UgaWYoJ3N0eWxlcyc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2RvY3VtZW50U3R5bGVzJykpKHdYbWwsZG9jKVxuXHRlbHNlIGlmKCdhYnN0cmFjdE51bSc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL251bWJlcmluZ0RlZmluaXRpb24nKSkod1htbCxkb2MpXG5cdGVsc2UgaWYoJ251bSc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL2xpc3QnKSkod1htbCxkb2MpXG5cdGVsc2UgaWYoJ3N0eWxlJz09dGFnKXtcblx0XHRzd2l0Y2god1htbC5hdHRyKCd3OnR5cGUnKSl7XG5cdFx0Y2FzZSAncGFyYWdyYXBoJzpcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvc3R5bGUvcGFyYWdyYXBoJykpKHdYbWwsZG9jKVxuXHRcdGNhc2UgJ2NoYXJhY3Rlcic6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL2lubGluZScpKSh3WG1sLGRvYylcblx0XHRjYXNlICd0YWJsZSc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL3RhYmxlJykpKHdYbWwsZG9jKVxuXHRcdGNhc2UgJ251bWJlcmluZyc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL251bWJlcmluZycpKSh3WG1sLGRvYylcblx0XHR9XG5cdH1lbHNlIGlmKCdkb2NEZWZhdWx0cyc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N0eWxlL2RvY3VtZW50JykpKHdYbWwsZG9jKVxuXHRlbHNlIGlmKCdib2R5Jz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvYm9keScpKSh3WG1sLGRvYywgcGFyZW50KVxuXHRlbHNlIGlmKCdwJz09dGFnKXtcblx0XHR2YXIgc3R5bGVJZD1hdHRyKHdYbWwuJDEoJz5wUHI+cFN0eWxlJyksJ3c6dmFsJyksIHN0eWxlPWRvYy5zdHlsZS5nZXQoc3R5bGVJZClcblx0XHRpZih3WG1sLiQxKCc+cFByPm51bVByJykgfHwgKHN0eWxlICYmIHN0eWxlLmdldE51bUlkKCkhPS0xKSlcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvbGlzdCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cblx0XHRpZihzdHlsZSAmJiBzdHlsZS5nZXRPdXRsaW5lTGV2ZWwoKSE9LTEpXG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2hlYWRpbmcnKSkod1htbCxkb2MsIHBhcmVudClcblxuXG5cblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3BhcmFncmFwaCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdH1lbHNlIGlmKCdyJz09dGFnKXtcblx0XHR2YXIgc3R5bGU9ZG9jLnN0eWxlLmdldChhdHRyKHdYbWwuJDEoJz5yUHI+clN0eWxlJyksJ3c6dmFsJykpXG5cdFx0aWYoc3R5bGUgJiYgc3R5bGUuZ2V0T3V0bGluZUxldmVsKCkhPS0xKVxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9oZWFkaW5nSW5saW5lJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRlbHNlIGlmKHdYbWwuY2hpbGROb2Rlcy5sZW5ndGg9PTEgfHwgKHdYbWwuY2hpbGROb2Rlcz09MiAmJiB3WG1sLmZpcnN0Q2hpbGQubG9jYWxOYW1lPT0nclByJykpe1xuXHRcdFx0c3dpdGNoKHdYbWwubGFzdENoaWxkLmxvY2FsTmFtZSl7XG5cdFx0XHRjYXNlICdmbGRDaGFyJzpcblx0XHRcdGNhc2UgJ2luc3RyVGV4dCc6XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KHdYbWwubGFzdENoaWxkLGRvYyxwYXJlbnQpXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9pbmxpbmUnKSkod1htbCxkb2MscGFyZW50KVxuXHR9ZWxzZSBpZignaW5zdHJUZXh0Jz09dGFnKVxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZEluc3RydWN0JykpKHdYbWwsIGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3QnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90ZXh0JykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignc3ltJz09dGFnICYmIHdYbWwucGFyZW50Tm9kZS5sb2NhbE5hbWU9PSdyJylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3N5bWJvbCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3NvZnRIeXBoZW4nPT10YWcgJiYgd1htbC5wYXJlbnROb2RlLmxvY2FsTmFtZT09J3InKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvc29mdEh5cGhlbicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ25vQnJlYWtIeXBoZW4nPT10YWcgJiYgd1htbC5wYXJlbnROb2RlLmxvY2FsTmFtZT09J3InKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvbm9CcmVha0h5cGhlbicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3RhYic9PXRhZyAmJiB3WG1sLnBhcmVudE5vZGUubG9jYWxOYW1lPT0ncicpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90YWInKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdmbGRTaW1wbGUnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZFNpbXBsZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ2ZsZENoYXInPT10YWcpe1xuXHRcdHN3aXRjaCh3WG1sLmF0dHIoJ3c6ZmxkQ2hhclR5cGUnKSl7XG5cdFx0Y2FzZSAnYmVnaW4nOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9maWVsZEJlZ2luJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRicmVha1xuXHRcdGNhc2UgJ2VuZCc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2ZpZWxkRW5kJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRicmVha1xuXHRcdGNhc2UgJ3NlcGFyYXRlJzpcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZmllbGRTZXBhcmF0ZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0YnJlYWtcblx0XHR9XG5cdH1lbHNlIGlmKCd0YmwnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC90YWJsZScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3RyJz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvcm93JykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZigndGMnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jZWxsJykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignYnInPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9icicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ2h5cGVybGluayc9PXRhZyAmJiAncCc9PXdYbWwucGFyZW50Tm9kZS5sb2NhbE5hbWUpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9oeXBlcmxpbmsnKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdBbHRlcm5hdGVDb250ZW50Jz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZHJhd2luZ0FuY2hvcicpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdGVsc2UgaWYoJ3dzcCc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL3NoYXBlJykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignaW5saW5lJz09dGFnKXtcblx0XHR2YXIgdHlwZT13WG1sLiQxKCc+Z3JhcGhpYz5ncmFwaGljRGF0YScpLmF0dHIoJ3VyaScpLnNwbGl0KCcvJykucG9wKClcblx0XHRzd2l0Y2godHlwZSl7XG5cdFx0Y2FzZSAncGljdHVyZSc6XG5cdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2ltYWdlJykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRjYXNlICdkaWFncmFtJzpcblx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZGlhZ3JhbScpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0Y2FzZSAnY2hhcnQnOlxuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jaGFydCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ2lubGluZSAnK3R5cGUgKycgaXMgbm90IHN1cHBvcmVkIHlldC4nKVxuXHRcdH1cblx0fWVsc2UgaWYoJ3NkdCc9PXRhZyl7XG5cdFx0dmFyIGVsQmluZGluZz13WG1sLiQxKCc+c2R0UHI+ZGF0YUJpbmRpbmcnKVxuXHRcdGlmKGVsQmluZGluZyl7Ly9wcm9wZXJ0aWVzXG5cdFx0XHR2YXIgcGF0aD1hdHRyKGVsQmluZGluZywgJ3c6eHBhdGgnKSxcblx0XHRcdFx0ZD1wYXRoLnNwbGl0KC9bXFwvXFw6XFxbXS8pLFxuXHRcdFx0XHRuYW1lPShkLnBvcCgpLGQucG9wKCkpO1xuXHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9kb2N1bWVudFByb3BlcnR5JykpKHdYbWwsZG9jLHBhcmVudCwgbmFtZSlcblx0XHR9ZWxzZSB7Ly9jb250cm9sc1xuXHRcdFx0dmFyIGVsVHlwZT13WG1sLiQxKCc+c2R0UHInKS4kMShcInRleHQsIHBpY3R1cmUsIGRvY1BhcnRMaXN0LCBjb21ib0JveCwgZHJvcERvd25MaXN0LCBkYXRlLCBjaGVja2JveFwiKVxuXHRcdFx0dGFnPWVsVHlwZSA/IGVsVHlwZS5sb2NhbE5hbWUgOiBudWxsXG5cdFx0XHRpZigndGV4dCc9PXRhZylcblx0XHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jb250cm9sL3RleHQnKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZigncGljdHVyZSc9PXRhZylcblx0XHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jb250cm9sL3BpY3R1cmUnKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZignZG9jUGFydExpc3QnPT10YWcpXG5cdFx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvY29udHJvbC9nYWxsZXJ5JykpKHdYbWwsZG9jLHBhcmVudClcblx0XHRcdGVsc2UgaWYoJ2NvbWJvQm94Jz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvY29tYm9ib3gnKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZignZHJvcERvd25MaXN0Jz09dGFnKVxuXHRcdFx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2NvbnRyb2wvZHJvcGRvd24nKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZignZGF0ZSc9PXRhZylcblx0XHRcdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9jb250cm9sL2RhdGUnKSkod1htbCxkb2MscGFyZW50KVxuXHRcdFx0ZWxzZSBpZignY2hlY2tib3gnPT10YWcpXG5cdFx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvY29udHJvbC9jaGVja2JveCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0XHRlbHNlXG5cdFx0XHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvY29udHJvbC9yaWNodGV4dCcpKSh3WG1sLGRvYyxwYXJlbnQpXG5cdFx0fVxuXHR9ZWxzZSBpZignYm9va21hcmtTdGFydCc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2Jvb2ttYXJrU3RhcnQnKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdib29rbWFya0VuZCc9PXRhZylcblx0XHRyZXR1cm4gbmV3IChyZXF1aXJlKCcuL21vZGVsL2Jvb2ttYXJrRW5kJykpKHdYbWwsZG9jLHBhcmVudClcblx0ZWxzZSBpZignb01hdGhQYXJhJz09dGFnKVxuXHRcdHJldHVybiBuZXcgKHJlcXVpcmUoJy4vbW9kZWwvZXF1YXRpb24nKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdvYmplY3QnPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9PTEUnKSkod1htbCxkb2MscGFyZW50KVxuXHRlbHNlIGlmKCdzZWN0UHInPT10YWcpXG5cdFx0cmV0dXJuIG5ldyAocmVxdWlyZSgnLi9tb2RlbC9zZWN0aW9uJykpKHdYbWwsZG9jLHBhcmVudClcblxuXHRyZXR1cm4gbmV3IE1vZGVsKHdYbWwsZG9jLHBhcmVudClcbn1cbiJdfQ==